雛形
```
# ID:
- PBI名: 
- ステータス: [to do/in progress/done]
- ユーザストーリー
- 受け入れ基準
- 注意事項
- 指摘事項（in progressの場合のみ）
```
# ID: 1
- PBI名: 少量レビュー実行機能追加
- ステータス: done
- ユーザストーリー
  - ユーザはレビュースペースに登録しているチェックリストに対してレビューを実行できる
- 受け入れ基準
  - レビュー実行画面が作成されている
  - レビュー結果画面が作成されている
    - レビュー中は10秒毎に最新のレビュー結果に更新される
  - 少量レビューの結果がelectron版と同様の処理結果になる
    - 入力されたドキュメントとレビュー設定に対して、少量レビューwokflowの出力が同一になる
  - 分割したチェックリストのレビューが終わる度にDBにチェック結果が保存される
  - 分割したチェックリストのレビューごとにエラーが出る可能性があるが、その場合は、評定にエラー用のアイコンを、チェックリストのコメント欄にエラー内容が表示されている
    - チェックリストのレビュー毎にエラーが出ても、workflow全体が正常終了すれば、レビューのステータスとしては成功とする
      - ただし、全てのチェックリストレビューが失敗した場合はレビューのステータスを失敗とみなす
      - この仕様はelectron版と異なるので注意する
  - 複数レビュー対象を同時にレビューできる
    - レビュー対象一覧セクションにステータスと共にレビュー中のレビュー対象が表示されている（`05b-review-target-list`参照）
  - レビュー実行の開始後はサイドバーにレビュー対象が表示され、簡単にレビュー結果閲覧画面に遷移できる

# ID: 2
- PBI名: 大量レビュー実行機能追加
- ステータス: done
- ユーザストーリー
  - ユーザはレビュースペースに登録しているチェックリストに対して大量レビューを実行できる
  - なぜならAIのコンテキスト長を超えるドキュメントをレビューできるようになるからだ
- 受け入れ基準
  - レビュー実行画面から大量レビューを実行することができる
  - 大量レビューの結果がelectron版と同様の処理結果になる
    - 入力されたドキュメントとレビュー設定に対して、大量レビューwokflowの出力が同一になる
  - エラーについての扱いが少量レビューと同様になっている

# ID: 3
- PBI名: レビューリトライ機能追加
- ステータス: done
- ユーザストーリー
  - ユーザは初回レビュー実施済みのチェック対象についてはレビューのリトライが選択可能になる
  - 初回レビュー時に（エラー等が発生することがあるので）全てのチェック項目に対してレビューが成功するとは限らないし、最新化したチェックリストで再度レビューを実行したい場合もあるからだ
- 受け入れ基準
  - レビューリトライ画面が設定されている（`12b-review-retry`参考）
    - リトライ範囲、レビュー種別、レビュー設定を指定できる
      - レビュー種別、レビュー設定は前回の指定内容がデフォルト値として表示されており、編集可能
    - リトライ範囲のオプションとしては以下が選択可能
      - 失敗項目のみリトライ
        - 前回失敗（エラー）しているチェックリスト項目に対してレビューを再実行
      - 全ての項目をリトライ
        - チェックリスト項目全てを再レビュー
          - 前回のチェックリスト内容と、レビュースペースに登録されている最新のチェックリスト項目が異なる場合は、その旨をユーザに示し、どちらのチェックリストを利用してリトライするかオプションとして選択させることができる
  - レビュー実行毎に、リトライに必要な情報（チェックリスト項目、レビュー種別、レビュー設定、初回レビュー時にアップロードされたドキュメント前処理内容（テキスト抽出・画像変換）のキャッシュ）が保存されていること
    - ドキュメントキャッシュの実体はサーバ内フォルダに保存し、DBにはそのパスが保存されている
      - 保存するフォルダのパスは環境変数で指定可能になっている
    - リトライ実行時は前回レビュー実行時の情報を元にレビューが実行されている
  - リトライ可能な場合（リトライに必要な情報が全て保存されており、レビューworkflowの再実行が可能。またレビュー中のステータスでない）のみ`リトライ`ボタンが有効化すること
  - 初回レビュー時もリトライ時も同じレビュー用workflowが利用できている（コード保守性の観点）

# ID: 4
- PBI名: 外部サービス（AI APIのことではない、レビュー実行用に用意した外部のAPIサーバを想定している）にAPI経由でレビュー実行処理を委託できるようにする
- ステータス: done
- ユーザストーリー
  - ユーザはレビュー実行の処理を外部サービスにAPI経由で委託できる
  - 独自のアルゴリズムでレビューが実行できるようにするためだ
- 受け入れ基準
  - レビュー実行画面から「外部API呼び出し」を選択してレビューを実行できる
    - 外部API呼び出しの場合の注意点もユーザにわかりやすくUI上で提示されている
      - Q&A機能が使えなくなること
      - リトライ機能が使えなくなること
      - ※どちらもレビュー対象のキャッシュが保存されないため
    - 期待するリクエスト・レスポンスのスキーマがユーザにわかりやすく提示されている
  - 外部API呼び出しレビューの場合は、以下のような挙動でレビューが実行されている
    - 以下をクライアントサイドで実行
      - 同時レビュー項目数ごとにチェックリストを分割
      - 分割したチェックリストごとに、レビュー設定を含めて外部APIを呼び出す
      - レスポンスには評定結果とレビューコメントが含まれており、その結果をサーバサイドのDBに保存する
  - 外部API呼び出しレビューを直接実行していないユーザでも10秒毎に最新の結果を確認できること
    - レビュースータスを適切に管理して既存の仕組みに乗ることが必要
  - 期待するAPIの説明が画面上で確認できること
    - レビュー実行画面に表示すると他の項目を見えづらくしてしまうので、別画面に飛ばすのが良いか？

# ID: 5
- PBI名: AI利用処理（AIチェックリスト生成、少量レビュー、大量レビュー、レビューリトライ）の処理キューイング実装
- ステータス: done
- ユーザストーリー
  - システムはAI処理をキューイングできる
  - 利用予定のAI APIは厳しい1分間あたりの流量制限が設定されており、AI処理を自由に並列で実行できないからだ
- 受け入れ基準
  - AI利用処理について、処理に利用するAPIキーごとにキューを作成して、管理できる
    - キー毎に流量制限が設定されているため
      - 本システムではプロジェクト毎に設定したキーもしくはシステムのデフォルトキー（環境変数で指定済み）を利用する可能性がある
    - 各キューで管理するタスクの実行並列度を環境変数で制御できる（全てのキューで今日つで良い、デフォルトは1）
  - キューにて待機中のレビュー対象にはそれ用のステータスが割り当てられており、レビュー対象一覧セクションのステータスやサイドバーで表示される
  - キューの内容をDBで永続化できている
    - キューにはレビュー対象ファイルも含めるはずなので、インメモリでAI利用処理の入力値等を管理するとメモリ逼迫につながるため
    - アップロードされたレビュー対象ファイルについては、メタデータをDBに保存して、ファイルの実体はサーバ内ディレクトリに保存すること
      - ディレクトリについては環境変数で指定可能にすること
      - ドキュメントキャッシュも同じような仕組みを利用しているので、共通化できる処理があれば検討すること
    - システム再起動した際にキューに残タスクがあれば内容が自動で実行される
  - レビュー対象がキューに登録されているステータス（`queued`）でレビュー一覧の削除ボタンで削除された場合、キューからも削除され、永続化データ（DB,ファイルキャッシュ）も削除されること
  - 本修正に併せて画面が最適化されている
    - レビュー結果画面
      - アクセスするとキューイングされていることがユーザに伝わるようになっている
      - `queued`状態から処理完了まで以下のような挙動になる
        - 10秒ごとにポーリングされ、最新の結果が取得される
        - Q&A,リトライボタンが押せない（実行してもエラーになる）
    - チェックリスト編集画面
      - アクセスするとキューイングされていることがユーザに伝わるようになっている
        - 「実行待ちリストから削除」ボタンを追加
          - 押下されるとキューから削除される
      - 10秒ごとにポーリングされ、最新の結果が取得される
      - チェックリストAI生成処理がエラーになった場合はチェックリスト編集画面上にエラーメッセージが表示される
        - このエラーメッセージはレビュースペース（つまりチェックリスト）あたり一つしか保存されない
          - チェックリストAI処理が失敗するたびにエラー内容を上書き
          - チェックリストAI処理が成功すると保存されているエラー内容を削除
      - `queued`状態から処理開始まで以下のような挙動になる
        - AI生成ボタンが押せない
      - 処理開始から処理完了まで以下のような挙動になる
        - インポートボタン、AI生成、項目を追加ボタンが押せない
- 注意事項
  - electron版には同様の仕組みがないので注意
  