雛形
```
# ID:
- PBI名: 
- ステータス: [to do/in progress/done]
- ユーザストーリー
- 受け入れ基準
- 注意事項
- 指摘事項（in progressの場合のみ）
```
# ID: 1
- PBI名: 少量レビュー実行機能追加
- ステータス: done
- ユーザストーリー
  - ユーザはレビュースペースに登録しているチェックリストに対してレビューを実行できる
- 受け入れ基準
  - レビュー実行画面が作成されている
  - レビュー結果画面が作成されている
    - レビュー中は10秒毎に最新のレビュー結果に更新される
  - 少量レビューの結果がelectron版と同様の処理結果になる
    - 入力されたドキュメントとレビュー設定に対して、少量レビューwokflowの出力が同一になる
  - 分割したチェックリストのレビューが終わる度にDBにチェック結果が保存される
  - 分割したチェックリストのレビューごとにエラーが出る可能性があるが、その場合は、評定にエラー用のアイコンを、チェックリストのコメント欄にエラー内容が表示されている
    - チェックリストのレビュー毎にエラーが出ても、workflow全体が正常終了すれば、レビューのステータスとしては成功とする
      - ただし、全てのチェックリストレビューが失敗した場合はレビューのステータスを失敗とみなす
      - この仕様はelectron版と異なるので注意する
  - 複数レビュー対象を同時にレビューできる
    - レビュー対象一覧セクションにステータスと共にレビュー中のレビュー対象が表示されている（`05b-review-target-list`参照）
  - レビュー実行の開始後はサイドバーにレビュー対象が表示され、簡単にレビュー結果閲覧画面に遷移できる
- 注意事項
  - workflowはelectorn版を十分に参考にすること
    - ただし、既存の処理をそのままコピーすれば良いということではなく、workflow作成方針に沿って、必要あればリファクタリングすること
    - web版とelectron版では機能面や設計思想の違いがあるため、workflowの細かい設計について変更が必要な場合もあるだろう
      - その場合は、無理にelectorn版に寄せずに、web版の設計思想に基づいて実装すること
    - electron版にはドキュメントキャッシュの仕組みがあるが、これはリトライ機能実装時に必要なので、ここではキャッシュについては考慮不要
  - workflowのドキュメントテキスト抽出は共通ステップである`fileProcessingStep`を利用すること
  - workflowは将来的なPBIも踏まえて最適な設計をすること
  - ファイルアップロードについてはAIチェックリスト生成時と共通のコンポーネントを利用すること
  - レビュー実行画面の画面モック（`12-review-execute`）はあるものの変更点がおおくあまり参考にならないので注意
    - 変更点
      - ファイルアップロードについてはAIチェックリスト生成と共通で、pdf画像変換・一括変換機能も付与する
      - 画面モックにおいてはレビュー設定と基準設定は別セクションだが、評定基準もレビュー設定に含まれるので同一セクションにする
    - 画面モックに含まれていない内容も実装することになるが、現在のUIにスムーズに馴染み、洗練されたUI・UXを提供するように注意すること

# ID: 2
- PBI名: 大量レビュー実行機能追加
- ステータス: in progress
- ユーザストーリー
  - ユーザはレビュースペースに登録しているチェックリストに対して大量レビューを実行できる
  - なぜならAIのコンテキスト長を超えるドキュメントをレビューできるようになるからだ
- 受け入れ基準
  - レビュー実行画面から大量レビューを実行することができる
  - 大量レビューの結果がelectron版と同様の処理結果になる
    - 入力されたドキュメントとレビュー設定に対して、大量レビューwokflowの出力が同一になる
      - つまり、各AI処理においてsystem・userプロンプトが完全一致しているということ
        - systemプロンプトは各agent定義の`instructions`で指定
        - userプロンプトはgenerateLegacyの引数で指定
  - エラーについての扱いが少量レビューと同様になっている
    - 大量レビューについてはチェックリスト毎に個別レビューと統合レビューが必要になるので、個別レビューのいずれかにエラーが発生した場合は、当該チェックリストについてはレビュー失敗とみなす
      - レビュー結果画面に表示するエラー内容は失敗した個別レビューの一つをピックアップしてそのエラーを表示する
    - エラー内容は内部処理が漏れ出ないようにすること（normalizeUnknownErrorで正規化したエラーメッセージのみ表示する）
- 注意事項
  - ID:1と同様
  - 少量レビューの処理もよく確認した上で、処理内容が整合するようにすること
    - electron版のようにチェックリスト分割後のstepをレビュー種別で条件分岐させるのが一番スムースか？
- 指摘事項
  - テストが失敗している
    - 受け入れ条件を満たすようにコード変更済み
      - プロダクションコードを正としてテストを修正してください

# ID: 3
- PBI名: レビューリトライ機能追加
- ステータス: to do
- ユーザストーリー
  - ユーザは初回レビュー実施済みのチェック対象についてはレビューのリトライが選択可能になる
  - 初回レビュー時に（エラー等が発生することがあるので）全てのチェック項目に対してレビューが成功するとは限らないし、最新化したチェックリストで再度レビューを実行したい場合もあるからだ
- 受け入れ基準
  - レビューリトライ画面が設定されている（`12b-review-retry`参考）
    - リトライ範囲、レビュー種別、レビュー設定を指定できる
      - レビュー種別、レビュー設定は前回の指定内容がデフォルト値として表示されており、編集可能
    - リトライ範囲のオプションとしては以下が選択可能
      - 失敗項目のみリトライ
        - 前回失敗（エラー）しているチェックリスト項目に対してレビューを再実行
      - 全ての項目をリトライ
        - チェックリスト項目全てを再レビュー
          - 前回のチェックリスト内容と、レビュースペースに登録されている最新のチェックリスト項目が異なる場合は、その旨をユーザに示し、どちらのチェックリストを利用してリトライするかオプションとして選択させることができる
  - レビュー実行毎に、リトライに必要な情報（チェックリスト項目、レビュー種別、レビュー設定、初回レビュー時にアップロードされたドキュメント前処理内容（テキスト抽出・画像変換）のキャッシュ）が保存されていること
    - ドキュメントキャッシュの実体はサーバ内フォルダに保存し、DBにはそのパスが保存されている
      - 保存するフォルダのパスは環境変数で指定可能になっている
    - リトライ実行時は前回レビュー実行時の情報を元にレビューが実行されている
  - リトライ可能な場合（リトライに必要な情報が全て保存されており、レビューworkflowの再実行が可能。またレビュー中のステータスでない）のみ`リトライ`ボタンが有効化すること
- 注意事項
  - 画面モックに含まれていなかったり変更されている箇所が多いが現在のUIにスムーズに馴染み、洗練されたUI・UXを提供するように注意すること
     - レビュー設定部分については共通コンポーネントが用意されているので、利用すること

# ID: 4
- PBI名: 外部サービスにAPI経由でレビュー実行処理を委託できるようにする
- ステータス: to do
- ユーザストーリー
  - ユーザはレビュー実行の処理を外部サービスにAPI経由で委託できる
  - 独自のアルゴリズムでレビューが実行できるようにするためだ
- 受け入れ基準
  - レビュー実行画面から「外部API呼び出し」を選択してレビューを実行できる
    - 外部API呼び出しの場合の注意点もユーザにわかりやすくUI上で提示されている
      - Q&A機能が使えなくなること
      - リトライ機能が使えなくなること
      - ※どちらもレビュー対象のキャッシュが保存されないため
    - 期待するリクエスト・レスポンスのスキーマがユーザにわかりやすく提示されている
  - 外部API呼び出しレビューの場合は、以下のような挙動でレビューが実行されている
    - 以下をクライアントサイドで実行
      - 同時レビュー項目数ごとにチェックリストを分割
      - 分割したチェックリストごとに、レビュー設定を含めて外部APIを呼び出す
      - レスポンスには評定結果とレビューコメントが含まれており、その結果をサーバサイドのDBに保存する
  - 初回レビュー時もリトライ時も同じレビュー用workflowが利用できている（コード保守性の観点）
- 注意事項
  - 画面モックに含まれていない内容も実装することになるが、現在のUIにスムーズに馴染み、洗練されたUI・UXを提供するように注意すること

# ID: 5
- PBI名: AI利用処理（AIチェックリスト生成、少量レビュー、大量レビュー）の処理キューイング実装
- ステータス: to do
- ユーザストーリー
  - システムはAI処理をキューイングできる
  - 利用予定のAI APIは厳しい1分間あたりの流量制限が設定されており、AI処理を自由に並列で実行できないからだ
- 受け入れ基準
  - AI利用処理について、処理に利用するAPIキーごとにキューを作成して、管理できる
    - キー毎に流量制限が設定されているため
      - 本システムではプロジェクト毎に設定したキーもしくはシステムのデフォルトキー（環境変数で指定済み）を利用する可能性がある
  - AI利用処理の並列実行数を環境変数で制御できる(デフォルトは1)
  - キューにて待機中のレビュー対象にはそれ用のステータスが割り当てられており、レビュー対象一覧セクションのステータスやサイドバーで表示される
- 注意事項